<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Rompecabezas Cumplemes</title>

<style>
body{
    text-align:center;
    background-color:#f4cbd4;
    font-family:Arial, sans-serif;
}

h1{
    color:#e91e63;
}

#puzzle{
    width:450px;
    height:450px;
    margin:20px auto;
    display:grid;
    grid-template-columns:repeat(3,1fr);
    grid-template-rows:repeat(3,1fr);
}

.piece{
    border:1px solid white;
    background-image:url("foto.jpg");
    background-size:450px 450px;
    cursor:pointer;
}

.selected{
    border:3px solid red;
}

#mensaje{
    display:none;
    margin-top:20px;
    font-size:22px;
    color:#d81b60;
}
</style>
</head>
<body>

<h1>ðŸ§© Arma nuestro rompecabezas ðŸ§©</h1>

<div id="puzzle"></div>

<div id="mensaje">
ðŸ’– Feliz cumple mes mi amor ðŸ’– <br>
Gracias por cada momento juntos âœ¨
</div>

<script>
const puzzle = document.getElementById("puzzle");
const mensaje = document.getElementById("mensaje");

let order = [...Array(9).keys()];
order.sort(() => Math.random() - 0.5);

let firstSelected = null;

function crearPuzzle(){
    puzzle.innerHTML="";

    order.forEach((num,index)=>{
        let div=document.createElement("div");
        div.classList.add("piece");
        div.style.backgroundPosition=`${-150*(num%3)}px ${-150*Math.floor(num/3)}px`;

        div.addEventListener("click",()=>{
            if(firstSelected === null){
                firstSelected = index;
                div.classList.add("selected");
            } else {
                // intercambiar
                [order[firstSelected], order[index]] = 
                [order[index], order[firstSelected]];

                firstSelected = null;
                crearPuzzle();
                verificar();
            }
        });

        puzzle.appendChild(div);
    });
}

function verificar(){
    for(let i=0;i<order.length;i++){
        if(order[i] !== i){
            return;
        }
    }
    mensaje.style.display="block";
}

crearPuzzle();
</script>

</body>
</html>
